import{j as e,b as c,a as N,u as y,r as C,f as k,H as T}from"./app-BuFDx-Qe.js";import{C as D,A as S}from"./app-layout-gv3U0F6q.js";import{c as w,d as F}from"./index-CGZUerCI.js";import{A as _}from"./accounts-table-BeZJm41z.js";import{B as v}from"./button-BZVWAlVI.js";import{D as E,a as M,b as P,c as A,d as B,e as z}from"./dialog-DLKeOfA-.js";import{T as H,b as L,c as f,d as o,e as O,f as n}from"./table-CyNWMn4z.js";import{F as V,c as $,d as x,e as m,f as h,b as q,g as u}from"./field-DLVBr99H.js";import{I as j}from"./input-ElP9p0lG.js";import{S as R,a as U,b as G,c as I,d as J}from"./select-BtUnUccJ.js";import{T as K}from"./transactions-table-B63XHdDG.js";/* empty css            */import"./index-DR5cvZQc.js";import"./app-logo-icon-DNGdMlik.js";import"./label-CUnfQGfh.js";import"./index-DQsvGNaV.js";import"./chevron-down-DtgeBsEm.js";function Q({expenseStats:a}){const{currentMonthTotalCreditCardExpense:r,previousMonthTotalCreditCardExpense:s}=a,t=s<r?"text-red-600 dark:text-red-400":s>r?"text-green-600 dark:text-green-400":"";return e.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-6",children:[e.jsx("div",{className:"mb-4 text-sm font-medium text-muted-foreground",children:"Credit Card Expenses"}),e.jsx("div",{className:`text-4xl font-bold ${t}`,children:c(r)}),e.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:["Last month: ",c(s)]})]})}function W({expenseStats:a}){const{currentMonthTotalExpense:r,previousMonthTotalExpense:s}=a,t=s<r?"text-red-600 dark:text-red-400":s>r?"text-green-600 dark:text-green-400":"";return e.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-6",children:[e.jsx("div",{className:"mb-4 text-sm font-medium text-muted-foreground",children:"Monthly Expenses"}),e.jsx("div",{className:`text-4xl font-bold ${t}`,children:c(r)}),e.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:["Last month: ",c(s)]})]})}function b({className:a}){const r=N.useId();return e.jsxs("svg",{className:a,fill:"none",children:[e.jsx("defs",{children:e.jsx("pattern",{id:r,x:"0",y:"0",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M-3 13 15-5M-5 5l18-18M-1 21 17 3"})})}),e.jsx("rect",{stroke:"none",fill:`url(#${r})`,width:"100%",height:"100%"})]})}function X({pendingBill:a,accounts:r}){const{data:s,setData:t,post:l,processing:p,errors:i}=y({account_id:"",bill_instance_id:a.id,amount:a.amount,paid_date:new Date().toISOString().split("T")[0],notes:"Paying bill for "+a.bill?.biller?.name}),g=d=>{d.preventDefault(),l(w.url(),{onSuccess:()=>{C.reload()}})};return e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:g,children:e.jsxs(V,{children:[e.jsxs($,{children:[e.jsxs(x,{children:[e.jsx(m,{htmlFor:"account_id",children:"Account"}),e.jsxs(h,{children:[e.jsxs(R,{value:s.account_id,onValueChange:d=>t("account_id",d),children:[e.jsx(U,{children:e.jsx(G,{placeholder:"Select an account"})}),e.jsx(I,{children:r.map(d=>e.jsx(J,{value:d.id.toString(),children:d.name},d.id))})]}),s.account_id&&e.jsx(q,{children:r.find(d=>d.id.toString()===s.account_id)?.balance}),e.jsx(u,{errors:i.account_id?[{message:i.account_id}]:void 0})]})]}),e.jsxs(x,{children:[e.jsx(m,{htmlFor:"amount",children:"Amount"}),e.jsxs(h,{children:[e.jsx(j,{id:"amount",type:"number",step:"0.01",min:"0",value:s.amount,onChange:d=>t("amount",parseFloat(d.target.value)),placeholder:"Enter amount"}),e.jsx(u,{errors:i.amount?[{message:i.amount}]:void 0})]})]}),e.jsxs(x,{children:[e.jsx(m,{htmlFor:"date",children:"Date"}),e.jsxs(h,{children:[e.jsx(j,{id:"date",type:"date",value:s.paid_date,onChange:d=>t("paid_date",d.target.value)}),e.jsx(u,{errors:i.paid_date?[{message:i.paid_date}]:void 0})]})]}),e.jsxs(x,{children:[e.jsx(m,{htmlFor:"notes",children:"Notes"}),e.jsxs(h,{children:[e.jsx(j,{id:"notes",type:"text",value:s.notes,onChange:d=>t("notes",d.target.value),placeholder:"Enter notes"}),e.jsx(u,{errors:i.notes?[{message:i.notes}]:void 0})]})]})]}),e.jsx("div",{className:"flex justify-between gap-2",children:e.jsx(v,{type:"submit",disabled:p,children:p?"Paying...":"Pay Bill"})})]})})})}function Y({billInstances:a,accounts:r}){const s=r.data.map(l=>({id:l.id,name:l.name,balance:l.balance.toString()})),t=()=>e.jsxs(H,{children:[e.jsx(L,{children:e.jsxs(f,{children:[e.jsx(o,{children:"#"}),e.jsx(o,{children:"Biller"}),e.jsx(o,{children:"Frequency"}),e.jsx(o,{children:"Due Date"}),e.jsx(o,{children:"Amount"}),e.jsx(o,{children:"Action"})]})}),e.jsx(O,{children:a.map(l=>e.jsxs(f,{children:[e.jsx(n,{children:l.id}),e.jsx(n,{children:l.bill?.biller?.name}),e.jsx(n,{className:"capitalize",children:l.bill?.frequency}),e.jsx(n,{children:k(l.due_date)}),e.jsx(n,{children:c(l.amount)}),e.jsx(n,{children:e.jsxs(E,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(v,{variant:"default",size:"sm",children:[e.jsx(D,{}),"Pay"]})}),e.jsxs(P,{children:[e.jsxs(A,{children:[e.jsx(B,{children:"Pay Bill"}),e.jsx(z,{children:"Select an account and pay the bill."})]}),e.jsx(X,{pendingBill:l,accounts:s})]})]})})]},l.id))})]});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center py-2 uppercase",children:e.jsx("h2",{className:"text-lg font-bold",children:"Pending Bills"})}),a.length>0?t():e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No pending bills found"})})]})}const Z=[{title:"Dashboard",href:F().url}];function pe({transactions:a,accounts:r,pendingBills:s,expenseStats:t}){return e.jsxs(S,{breadcrumbs:Z,children:[e.jsx(T,{title:"Dashboard"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"grid auto-rows-min gap-4 md:grid-cols-4",children:[e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:e.jsx(W,{expenseStats:t})}),e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:e.jsx(Q,{expenseStats:t})}),e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:e.jsx(b,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})}),e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:e.jsx(b,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})})]}),e.jsxs("div",{className:"grid auto-rows-min gap-4 md:grid-cols-3",children:[e.jsx("div",{className:"relative col-span-full overflow-hidden rounded-xl border border-sidebar-border/70 md:col-span-2 dark:border-sidebar-border",children:e.jsx(K,{transactions:a,type:"expense"})}),e.jsx("div",{className:"relative col-span-full overflow-hidden rounded-xl border border-sidebar-border/70 md:col-span-1 dark:border-sidebar-border",children:e.jsx(_,{accounts:r,fullView:!1})})]}),e.jsx("div",{className:"grid auto-rows-min gap-4 md:grid-cols-3",children:e.jsx("div",{className:"relative col-span-2 overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:e.jsx(Y,{billInstances:s,accounts:r})})}),e.jsx("div",{className:"relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:e.jsx(b,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})})]})]})}export{pe as default};

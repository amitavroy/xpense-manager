import{j as e,b,a as y,u as N,r as k,f as D,H as S}from"./app-TKxpin7R.js";import{C as T,A as w}from"./app-layout-Cr-hDDGW.js";import{c as F,d as _}from"./index-CGZUerCI.js";import{A as C}from"./accounts-table-CXYdHFMp.js";import{B as v}from"./button-CAYBFhPg.js";import{D as P,a as A,b as B,c as E,d as z,e as M}from"./dialog-Db37BB32.js";import{T as H,b as L,c as f,d as o,e as O,f as n}from"./table-BbMDk_mb.js";import{F as V,c as q,d as c,e as x,f as h,b as R,g as m}from"./field-BSMiaMGR.js";import{I as j}from"./input-Dx4D825Z.js";import{S as U,a as $,b as G,c as I,d as J}from"./select-DGa0C0JQ.js";import{T as K}from"./transactions-table-D-TXOuQz.js";/* empty css            */import"./index-CIysaKCZ.js";import"./app-logo-icon-B1gCjR77.js";import"./label-D7CmDfLT.js";import"./index-Df_WCa04.js";import"./check-B759GG2d.js";function Q({expenseStats:l}){const{currentMonthTotalExpense:s,previousMonthTotalExpense:a}=l,i=a<s?"text-red-600 dark:text-red-400":a>s?"text-green-600 dark:text-green-400":"";return e.jsxs("div",{className:"flex h-full flex-col items-center justify-center p-6",children:[e.jsx("div",{className:`text-4xl font-bold ${i}`,children:b(s)}),e.jsxs("div",{className:"mt-2 text-sm text-muted-foreground",children:["Last month: ",b(a)]})]})}function u({className:l}){const s=y.useId();return e.jsxs("svg",{className:l,fill:"none",children:[e.jsx("defs",{children:e.jsx("pattern",{id:s,x:"0",y:"0",width:"10",height:"10",patternUnits:"userSpaceOnUse",children:e.jsx("path",{d:"M-3 13 15-5M-5 5l18-18M-1 21 17 3"})})}),e.jsx("rect",{stroke:"none",fill:`url(#${s})`,width:"100%",height:"100%"})]})}function W({pendingBill:l,accounts:s}){const{data:a,setData:i,post:d,processing:p,errors:t}=N({account_id:"",bill_instance_id:l.id,amount:l.amount,paid_date:new Date().toISOString().split("T")[0],notes:"Paying bill for "+l.bill?.biller?.name}),g=r=>{r.preventDefault(),d(F.url(),{onSuccess:()=>{k.reload()}})};return e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:g,children:e.jsxs(V,{children:[e.jsxs(q,{children:[e.jsxs(c,{children:[e.jsx(x,{htmlFor:"account_id",children:"Account"}),e.jsxs(h,{children:[e.jsxs(U,{value:a.account_id,onValueChange:r=>i("account_id",r),children:[e.jsx($,{children:e.jsx(G,{placeholder:"Select an account"})}),e.jsx(I,{children:s.map(r=>e.jsx(J,{value:r.id.toString(),children:r.name},r.id))})]}),a.account_id&&e.jsx(R,{children:s.find(r=>r.id.toString()===a.account_id)?.balance}),e.jsx(m,{errors:t.account_id?[{message:t.account_id}]:void 0})]})]}),e.jsxs(c,{children:[e.jsx(x,{htmlFor:"amount",children:"Amount"}),e.jsxs(h,{children:[e.jsx(j,{id:"amount",type:"number",step:"0.01",min:"0",value:a.amount,onChange:r=>i("amount",parseFloat(r.target.value)),placeholder:"Enter amount"}),e.jsx(m,{errors:t.amount?[{message:t.amount}]:void 0})]})]}),e.jsxs(c,{children:[e.jsx(x,{htmlFor:"date",children:"Date"}),e.jsxs(h,{children:[e.jsx(j,{id:"date",type:"date",value:a.paid_date,onChange:r=>i("paid_date",r.target.value)}),e.jsx(m,{errors:t.paid_date?[{message:t.paid_date}]:void 0})]})]}),e.jsxs(c,{children:[e.jsx(x,{htmlFor:"notes",children:"Notes"}),e.jsxs(h,{children:[e.jsx(j,{id:"notes",type:"text",value:a.notes,onChange:r=>i("notes",r.target.value),placeholder:"Enter notes"}),e.jsx(m,{errors:t.notes?[{message:t.notes}]:void 0})]})]})]}),e.jsx("div",{className:"flex justify-between gap-2",children:e.jsx(v,{type:"submit",disabled:p,children:p?"Paying...":"Pay Bill"})})]})})})}function X({billInstances:l,accounts:s}){const a=s.data.map(d=>({id:d.id,name:d.name,balance:d.balance.toString()})),i=()=>e.jsxs(H,{children:[e.jsx(L,{children:e.jsxs(f,{children:[e.jsx(o,{children:"#"}),e.jsx(o,{children:"Biller"}),e.jsx(o,{children:"Frequency"}),e.jsx(o,{children:"Due Date"}),e.jsx(o,{children:"Amount"}),e.jsx(o,{children:"Action"})]})}),e.jsx(O,{children:l.map(d=>e.jsxs(f,{children:[e.jsx(n,{children:d.id}),e.jsx(n,{children:d.bill?.biller?.name}),e.jsx(n,{className:"capitalize",children:d.bill?.frequency}),e.jsx(n,{children:D(d.due_date)}),e.jsx(n,{children:b(d.amount)}),e.jsx(n,{children:e.jsxs(P,{children:[e.jsx(A,{asChild:!0,children:e.jsxs(v,{variant:"default",size:"sm",children:[e.jsx(T,{}),"Pay"]})}),e.jsxs(B,{children:[e.jsxs(E,{children:[e.jsx(z,{children:"Pay Bill"}),e.jsx(M,{children:"Select an account and pay the bill."})]}),e.jsx(W,{pendingBill:d,accounts:a})]})]})})]},d.id))})]});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center py-2 uppercase",children:e.jsx("h2",{className:"text-lg font-bold",children:"Pending Bills"})}),l.length>0?i():e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("p",{className:"text-sm text-gray-500",children:"No pending bills found"})})]})}const Y=[{title:"Dashboard",href:_().url}];function be({transactions:l,accounts:s,pendingBills:a,expenseStats:i}){return e.jsxs(w,{breadcrumbs:Y,children:[e.jsx(S,{title:"Dashboard"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"grid auto-rows-min gap-4 md:grid-cols-4",children:[e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:e.jsx(Q,{expenseStats:i})}),e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:e.jsx(u,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})}),e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:e.jsx(u,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})}),e.jsx("div",{className:"relative aspect-video overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:e.jsx(u,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})})]}),e.jsxs("div",{className:"grid auto-rows-min gap-4 md:grid-cols-3",children:[e.jsx("div",{className:"relative col-span-full overflow-hidden rounded-xl border border-sidebar-border/70 md:col-span-2 dark:border-sidebar-border",children:e.jsx(K,{transactions:l,type:"expense"})}),e.jsx("div",{className:"relative col-span-full overflow-hidden rounded-xl border border-sidebar-border/70 md:col-span-1 dark:border-sidebar-border",children:e.jsx(C,{accounts:s,fullView:!1})})]}),e.jsx("div",{className:"grid auto-rows-min gap-4 md:grid-cols-3",children:e.jsx("div",{className:"relative col-span-2 overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border",children:e.jsx(X,{billInstances:a,accounts:s})})}),e.jsx("div",{className:"relative min-h-[100vh] flex-1 overflow-hidden rounded-xl border border-sidebar-border/70 md:min-h-min dark:border-sidebar-border",children:e.jsx(u,{className:"absolute inset-0 size-full stroke-neutral-900/20 dark:stroke-neutral-100/20"})})]})]})}export{be as default};

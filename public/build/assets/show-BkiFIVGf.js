import{u as g,j as e,f as o,a as b,H as D}from"./app-ve5BU_pJ.js";import{H as v}from"./heading-CurFds9m.js";import{B as f}from"./button-D2x7kvve.js";import{F as A,a as F,b as i,c as m,d as x,e as N,f as w}from"./field-F1f4fuUp.js";import{I as _}from"./input-DjXr1uaT.js";import{D as y,a as R,b as k,c as B,d as S}from"./dialog-B5xdTuwH.js";import{A as C}from"./account-form-DnJlHfrY.js";import{A as E,i as H}from"./app-layout-B16zKjzA.js";/* empty css            */import"./label-BGxtZQUH.js";import"./confirm-dialog-Bbk_xA_X.js";import"./index-CQI2C884.js";import"./card-Clb8znuj.js";import"./select-DQDoJicF.js";import"./index-KgTj-bHc.js";import"./chevron-down-BSTTkKAt.js";import"./index-CGZUerCI.js";import"./app-logo-icon-B4GUqTPf.js";function O(n){return`/account/${n}/reconcile`}function I(n,t){const a=n-t;return a===0?{message:"Balance matches â€” no adjustment needed",variant:"match"}:a>0?{message:`Difference: +${o(a)} (will add income)`,variant:"income"}:{message:`Difference: ${o(a)} (will add expense)`,variant:"expense"}}function V({account:n,onSuccess:t}){const a=Number(n.balance),{data:s,setData:p,post:h,processing:d,errors:u}=g({actual_balance:a>0?String(a):""}),l=parseFloat(s.actual_balance),c=!Number.isNaN(l)&&l>=0&&s.actual_balance!==""?I(l,a):null,j=r=>{r.preventDefault(),h(O(n.id),{onSuccess:()=>{t?.()}})};return e.jsx("form",{onSubmit:j,children:e.jsxs(A,{children:[e.jsxs(F,{children:[e.jsxs(i,{children:[e.jsx(m,{children:"Current tracked balance"}),e.jsx(x,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:o(a)})})]}),e.jsxs(i,{children:[e.jsx(m,{htmlFor:"actual_balance",children:"Actual bank balance"}),e.jsxs(x,{children:[e.jsx(_,{id:"actual_balance",type:"number",step:"0.01",min:"0",value:s.actual_balance,onChange:r=>p("actual_balance",r.target.value),placeholder:"Enter actual balance"}),e.jsx(N,{errors:u.actual_balance?[{message:u.actual_balance}]:void 0})]})]}),c&&e.jsx(i,{children:e.jsx(w,{children:e.jsx("span",{className:c.variant==="income"?"text-green-600 dark:text-green-400":c.variant==="expense"?"text-red-600 dark:text-red-400":"text-muted-foreground",children:c.message})})})]}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(f,{type:"submit",disabled:d,children:d?"Reconciling...":"Reconcile"})})]})})}function $({account:n,isOpen:t,onClose:a}){return e.jsx(y,{open:t,onOpenChange:s=>!s&&a(),children:e.jsxs(R,{children:[e.jsxs(k,{children:[e.jsx(B,{children:"Reconcile Balance"}),e.jsx(S,{children:"Enter the actual balance from your bank to sync with the tracked balance. An adjustment transaction will be created if there is a difference."})]}),e.jsx(V,{account:n,onSuccess:a})]})})}const L=[{title:"Accounts",href:H().url},{title:"Add Account",href:"#"}];function ce({account:n}){const[t,a]=b.useState(!1);return e.jsxs(E,{breadcrumbs:L,children:[e.jsx(D,{title:"Account Details"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsx(v,{title:"Account Details",description:"View the details of an account"}),e.jsx(f,{type:"button",variant:"outline",onClick:()=>a(!0),children:"Reconcile Balance"})]}),e.jsx($,{account:n,isOpen:t,onClose:()=>a(!1)}),e.jsx("div",{className:"w-full lg:grid lg:grid-cols-4",children:e.jsx("div",{className:"lg:col-span-2",children:e.jsx("div",{className:"flex flex-col gap-4",children:e.jsx(C,{account:n})})})})]})]})}export{ce as default};

import{u as E,j as e,r as A}from"./app-TKxpin7R.js";import{C as w}from"./confirm-dialog-SDgmFVgG.js";import{B as j}from"./button-CAYBFhPg.js";import{C as B,a as I}from"./card-D0HllRoH.js";import{F as V,a as $,b as L,c as q,d as o,e as n,f as l,g as c}from"./field-BSMiaMGR.js";import{I as u}from"./input-Dx4D825Z.js";import{S as p,a as g,b as v,c as S,d as f}from"./select-DGa0C0JQ.js";import{o as G,p as N,B as O,D as R,q as k,E as z}from"./app-layout-Cr-hDDGW.js";function X({accounts:y,categories:F,transaction:r,type:m}){const i=r.id!==void 0,{data:d,setData:a,post:_,put:C,processing:h,errors:s,reset:D}=E({account_id:r.account_id?r.account_id.toString():"",category_id:r.category_id?r.category_id.toString():"",amount:r.amount||"",date:r.date?new Date(r.date).toISOString().split("T")[0]:"",description:r.description||""}),b=t=>{t.preventDefault();const x=m==="income"?i?G(r.id).url:N().url:i?O(r.id).url:R().url;i?C(x):_(x,{onSuccess:()=>{D()}})},T=()=>A.delete(m==="income"?k(r.id).url:z(r.id).url);return e.jsx(B,{children:e.jsx(I,{children:e.jsx("form",{onSubmit:b,children:e.jsxs(V,{children:[e.jsx($,{children:i?"Edit Transaction":"Add Transaction"}),e.jsx(L,{children:i?"Edit the details of a transaction":"Add details about a new transaction"}),e.jsxs(q,{children:[e.jsxs(o,{children:[e.jsx(n,{htmlFor:"account_id",children:"Account"}),e.jsxs(l,{children:[e.jsxs(p,{value:d.account_id,onValueChange:t=>a("account_id",t),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select an account"})}),e.jsx(S,{children:y.map(t=>e.jsx(f,{value:t.id.toString(),children:t.name},t.id))})]}),e.jsx(c,{errors:s.account_id?[{message:s.account_id}]:void 0})]})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"category_id",children:"Category"}),e.jsxs(l,{children:[e.jsxs(p,{value:d.category_id,onValueChange:t=>a("category_id",t),children:[e.jsx(g,{children:e.jsx(v,{placeholder:"Select a category"})}),e.jsx(S,{children:F.map(t=>e.jsx(f,{value:t.id.toString(),children:t.name},t.id))})]}),e.jsx(c,{errors:s.category_id?[{message:s.category_id}]:void 0})]})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"amount",children:"Amount"}),e.jsxs(l,{children:[e.jsx(u,{id:"amount",type:"number",step:"0.01",min:"0",value:d.amount,onChange:t=>a("amount",t.target.value),placeholder:"Enter amount"}),e.jsx(c,{errors:s.amount?[{message:s.amount}]:void 0})]})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"date",children:"Date"}),e.jsxs(l,{children:[e.jsx(u,{id:"date",type:"date",value:d.date,onChange:t=>a("date",t.target.value)}),e.jsx(c,{errors:s.date?[{message:s.date}]:void 0})]})]}),e.jsxs(o,{children:[e.jsx(n,{htmlFor:"description",children:"Description"}),e.jsxs(l,{children:[e.jsx(u,{id:"description",type:"text",value:d.description,onChange:t=>a("description",t.target.value),placeholder:"Enter description"}),e.jsx(c,{errors:s.description?[{message:s.description}]:void 0})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2",children:[e.jsx(w,{title:"Delete Transaction",description:"Are you sure you want to delete this transaction?",confirmButtonText:"Delete",trigger:e.jsx(j,{variant:"destructive",type:"button",children:"Delete"}),onConfirm:T}),e.jsx(j,{type:"submit",disabled:h,children:h?"Saving...":i?"Save Transaction":"Add Transaction"})]})]})})})})}export{X as T};

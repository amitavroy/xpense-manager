import{u as b,j as e,r as D}from"./app-ve5BU_pJ.js";import{C as S}from"./confirm-dialog-Bbk_xA_X.js";import{B as j}from"./button-D2x7kvve.js";import{C as T,a as y}from"./card-Clb8znuj.js";import{C as E}from"./checkbox-9GFXk7aE.js";import{F as w,g as A,f as N,a as k,b as l,c as o,d as c,e as m}from"./field-F1f4fuUp.js";import{I as x}from"./input-DjXr1uaT.js";import{a8 as B,a9 as I,aa as L}from"./app-layout-B16zKjzA.js";function H({trip:t,users:h=[]}){const r=t.id!==void 0,{data:i,setData:n,post:p,put:g,processing:u,errors:a,reset:_}=b({name:t.name||"",start_date:t.start_date?new Date(t.start_date).toISOString().split("T")[0]:"",end_date:t.end_date?new Date(t.end_date).toISOString().split("T")[0]:"",user_ids:t.members?.map(s=>s.id)||[]}),f=s=>{s.preventDefault();const d=r?B(t.id).url:I().url;r?g(d):p(d,{onSuccess:()=>{_()}})},v=()=>D.delete(L(t.id).url),C=s=>{const d=i.user_ids;d.includes(s)?n("user_ids",d.filter(F=>F!==s)):n("user_ids",[...d,s])};return e.jsx(T,{children:e.jsx(y,{children:e.jsx("form",{onSubmit:f,children:e.jsxs(w,{children:[e.jsx(A,{children:r?"Edit Trip":"Add Trip"}),e.jsx(N,{children:r?"Edit the details of a trip":"Add details about a new trip"}),e.jsxs(k,{children:[e.jsxs(l,{children:[e.jsx(o,{htmlFor:"name",children:"Trip Name"}),e.jsxs(c,{children:[e.jsx(x,{id:"name",type:"text",value:i.name,onChange:s=>n("name",s.target.value),placeholder:"Enter trip name"}),e.jsx(m,{errors:a.name?[{message:a.name}]:void 0})]})]}),e.jsxs(l,{children:[e.jsx(o,{htmlFor:"start_date",children:"Start Date"}),e.jsxs(c,{children:[e.jsx(x,{id:"start_date",type:"date",value:i.start_date,onChange:s=>n("start_date",s.target.value)}),e.jsx(m,{errors:a.start_date?[{message:a.start_date}]:void 0})]})]}),e.jsxs(l,{children:[e.jsx(o,{htmlFor:"end_date",children:"End Date"}),e.jsxs(c,{children:[e.jsx(x,{id:"end_date",type:"date",value:i.end_date,onChange:s=>n("end_date",s.target.value)}),e.jsx(m,{errors:a.end_date?[{message:a.end_date}]:void 0})]})]}),h.length>0&&e.jsxs(l,{children:[e.jsx(o,{children:"Add Members"}),e.jsxs(c,{children:[e.jsx("div",{className:"flex flex-col gap-2",children:h.map(s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{id:`user-${s.id}`,checked:i.user_ids.includes(s.id),onCheckedChange:()=>C(s.id)}),e.jsx("label",{htmlFor:`user-${s.id}`,className:"cursor-pointer",children:s.name})]},s.id))}),e.jsx(m,{errors:a.user_ids?[{message:a.user_ids}]:void 0})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2",children:[r&&e.jsx(S,{title:"Delete Trip",description:"Are you sure you want to delete this trip?",confirmButtonText:"Delete",trigger:e.jsx(j,{variant:"destructive",type:"button",children:"Delete"}),onConfirm:v}),e.jsx(j,{type:"submit",disabled:u,children:u?"Saving...":r?"Save Trip":"Add Trip"})]})]})})})})}export{H as T};

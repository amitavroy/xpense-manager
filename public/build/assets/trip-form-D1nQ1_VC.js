import{u as b,j as e,r as D}from"./app-TKxpin7R.js";import{C as S}from"./confirm-dialog-SDgmFVgG.js";import{B as j}from"./button-CAYBFhPg.js";import{C as T,a as y}from"./card-D0HllRoH.js";import{C as E}from"./checkbox-kzX9mJtg.js";import{F as w,a as A,b as N,c as k,d as l,e as o,f as c,g as m}from"./field-BSMiaMGR.js";import{I as x}from"./input-Dx4D825Z.js";import{a3 as B,a4 as I,a5 as L}from"./app-layout-Cr-hDDGW.js";function H({trip:t,users:h=[]}){const a=t.id!==void 0,{data:i,setData:n,post:p,put:g,processing:u,errors:r,reset:_}=b({name:t.name||"",start_date:t.start_date?new Date(t.start_date).toISOString().split("T")[0]:"",end_date:t.end_date?new Date(t.end_date).toISOString().split("T")[0]:"",user_ids:t.members?.map(s=>s.id)||[]}),f=s=>{s.preventDefault();const d=a?B(t.id).url:I().url;a?g(d):p(d,{onSuccess:()=>{_()}})},v=()=>D.delete(L(t.id).url),C=s=>{const d=i.user_ids;d.includes(s)?n("user_ids",d.filter(F=>F!==s)):n("user_ids",[...d,s])};return e.jsx(T,{children:e.jsx(y,{children:e.jsx("form",{onSubmit:f,children:e.jsxs(w,{children:[e.jsx(A,{children:a?"Edit Trip":"Add Trip"}),e.jsx(N,{children:a?"Edit the details of a trip":"Add details about a new trip"}),e.jsxs(k,{children:[e.jsxs(l,{children:[e.jsx(o,{htmlFor:"name",children:"Trip Name"}),e.jsxs(c,{children:[e.jsx(x,{id:"name",type:"text",value:i.name,onChange:s=>n("name",s.target.value),placeholder:"Enter trip name"}),e.jsx(m,{errors:r.name?[{message:r.name}]:void 0})]})]}),e.jsxs(l,{children:[e.jsx(o,{htmlFor:"start_date",children:"Start Date"}),e.jsxs(c,{children:[e.jsx(x,{id:"start_date",type:"date",value:i.start_date,onChange:s=>n("start_date",s.target.value)}),e.jsx(m,{errors:r.start_date?[{message:r.start_date}]:void 0})]})]}),e.jsxs(l,{children:[e.jsx(o,{htmlFor:"end_date",children:"End Date"}),e.jsxs(c,{children:[e.jsx(x,{id:"end_date",type:"date",value:i.end_date,onChange:s=>n("end_date",s.target.value)}),e.jsx(m,{errors:r.end_date?[{message:r.end_date}]:void 0})]})]}),h.length>0&&e.jsxs(l,{children:[e.jsx(o,{children:"Add Members"}),e.jsxs(c,{children:[e.jsx("div",{className:"flex flex-col gap-2",children:h.map(s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{id:`user-${s.id}`,checked:i.user_ids.includes(s.id),onCheckedChange:()=>C(s.id)}),e.jsx("label",{htmlFor:`user-${s.id}`,className:"cursor-pointer",children:s.name})]},s.id))}),e.jsx(m,{errors:r.user_ids?[{message:r.user_ids}]:void 0})]})]})]}),e.jsxs("div",{className:"flex justify-between gap-2",children:[a&&e.jsx(S,{title:"Delete Trip",description:"Are you sure you want to delete this trip?",confirmButtonText:"Delete",trigger:e.jsx(j,{variant:"destructive",type:"button",children:"Delete"}),onConfirm:v}),e.jsx(j,{type:"submit",disabled:u,children:u?"Saving...":a?"Save Trip":"Add Trip"})]})]})})})})}export{H as T};
